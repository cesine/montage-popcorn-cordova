var Montage=require("montage").Montage,Component=require("montage/ui/component").Component,Remotemediator=require("model/remotemediator").Remotemediator,AppData=require("model/appdata").AppData;exports.Main=Montage.create(Component,{appData:{value:AppData.create()},remoteMediator:{value:Remotemediator.create()},categoryId:{value:null},_categoryButtonGroup:{value:null},didCreate:{value:function(){this.application.addEventListener("remoteDataReceived",this,!1),this.application.addEventListener("openTrailer",this,!1),this.canDrawGate.setField("latestBoxofficeMovies",!1),this.remoteMediator.load()}},templateDidLoad:{value:function(){var e=this.templateObjects;this._categoryButtonGroup=[e.latest,e.theaters,e.dvd,e.upcoming]}},handleRemoteDataReceived:{value:function(e){var t=e.detail.data,a=e.detail.type;this.appData[a]=t,"latestBoxofficeMovies"===a&&(this.canDrawGate.setField("latestBoxofficeMovies",!0),this.dispatchEventNamed("dataReceived",!0),this.changeCategory(a))}},handleOpenTrailer:{value:function(e){var t=e.detail,a=this.templateObjects.popup;this.remoteMediator.searchYoutubeTrailer(t,function(e){a.openTrailer(e)})}},handleCategoryButtonAction:{value:function(e){this.changeCategory(e.target.category)}},changeCategory:{value:function(e){var t=this._categoryButtonGroup;this.categoryId=e;for(var a=0;t.length>a;a++)t[a].pressed=t[a].category===e}}});